{% extends "rango/base.html" %}

{% load static %}
{% load rango_extras %}
{% load thumbnail %}
{% block stylesheet %}
    <link rel="stylesheet" href="{% static 'css/users.css' %}" type="text/css" />
	
    <style type="text/css">
        @media (max-width: 767px) {
	    .body {
		margin-left: 0px;
	    margin-right: 0px;
	    min-width: 700px;
	    }
    </style>
{% endblock %}

{% block title %}Find Friends{% endblock %}

{% block side_block %}
{% endblock %}
{% block body_width %}
    <div class="body col-sm-12 col-sm-offset-0 col-md-12 col-md-offset-0">
{% endblock %}
{% block body_block %}

    <div class="page-header">
        <h1>Find Colleagues</h1>
    </div>

        <div class="hidden-row row row-centered desk" id ="row0" style="margin-bottom:30px"> <!--This is the row to put big profiles in-->
            <div class="hideClose">
                <a class="close">&times;</a>
            </div>
        </div>
        <div class="row placeholders desk">
            {% for u, up, uwe, uedu in udict%}
            <div class="userProfile desk {% widthratio forloop.counter 1 1 %}" id="{% widthratio forloop.counter|add:'-3' 4 1 %}">
                <div class="col-xs-6 col-sm-3 placeholder inactive">
                    <!--This adds the row number to the id, becuase widthratio rounds, we need to offset it by 2-->

                    {% if up.picture %}
                        <img src= "{% thumbnail up.picture 250x300 quality=95 %}"  class="img-responsive" alt="{{ up.firstName }} Profile Picture" style = "height:150px;"/> 
                
                    <!--<img src= "{{ up.picture.url }}"  class="img-responsive" alt="{{ up.firstName }} Profile Picture" style = "height:150px;"/> 
                    -->
                    {% else %}
                    <img src= "http://www.nsacct.org/images/nsa-blog/question-mark.jpg?sfvrsn=0" class="img-responsive" alt=" {{ u.username }} Profile Picture" style = "height:150px;"/> 
                    {% endif %}
                    <h4>{{ up.firstName }} {{ up.lastName }}</h4>
                    {% if u|looking_for_group %}
                    <h5>Looking for Group</h5>
                    {% else %}
                    <h5>In group with: {{ u|get_group_names:request.user }}</h5>
                    
                    {% endif %}
                </div>
                {% if uwe.company %}
                <div class="col-xs-6 col-md-6 col-md-offset-0 myhide">
                    <p>{{ uwe.company }}</p>
                    <p>{{ uwe.jobTitle }}</p>
                    <p>{{ uedu.school }}</p>
                    <p>{{ uedu.get_degree_display }} - {{ uedu.major }}</p>
                    <a href ="/rango/pub-profile/{{u.id}}/">View Profile</a>
                    {% if request.user|looking_for_group %}
                    {% else %}
                    {% if request.user|in_group:up.user %}
                                <br />
                                <p>{{up.firstName}} is already in your group.</p>
                        {% else %}
                            {% if request.user|full_group %}
                                <br />
                                <p>Your group is full. Remove a member from your group first.</p>
                            {% else %}
                                <br />
                                <a href ="/rango/send_email/{{u.id}}/">Add to Group</a>
                        {% endif %}
                        {% endif %}
                    {% endif %}

                </div>
                {% endif %}
            </div>
                
        {% if forloop.last %}
        </div> <!--end row-->
        {% else %}
            {% if forloop.counter|divisibleby:"4" %} <!-- this take the forloop count and see's it is divisible by 4, if so create a new row -->
        </div>
        <div class="hidden-row row-centered row desk" id="row{% widthratio forloop.counter 4 1 %}">
            <div class="hideClose">
                <a class="close">&times;</a>
            </div>
        <!--This sets the id of the div to the row number-->
        </div>
        <div class="row placeholders desk">
            {% endif %}
        {% endif %}
        
    {% endfor %}



        <div class="hidden-row row row-centered mobile" id ="mobilerow0" style="margin-bottom:30px"> <!--This is the row to put big profiles in-->
            <div class="hideClose">
                <a class="close">&times;</a>
            </div>
        </div>

        <div class="row placeholders mobile">
            {% for u, up, uwe, uedu in udict2 %}
            <div class="userProfile mobile {% widthratio forloop.counter 1 1 %}" id="{% widthratio forloop.counter|add:'-2' 2 1 %}">
                <div class="col-xs-6 col-sm-3 placeholder inactive">
                    <!--This adds the row number to the id, becuase widthratio rounds, we need to offset it by 2-->
                    {% if up.picture %}
                        <img src= "{% thumbnail up.picture 250x300 quality=95 %}"  class="img-responsive" alt="{{ up.firstName }} Profile Picture" style = "height:150px;"/> 
                
                    {% else %}
                    <img src= "http://www.nsacct.org/images/nsa-blog/question-mark.jpg?sfvrsn=0" class="img-responsive" alt=" {{ u.username }} Profile Picture" style = "height:150px;"/> 
                    {% endif %}
                    <h4>{{ up.firstName }} {{ up.lastName }}</h4>
                {% if up.user|has_group %}
                    <h5>In group with: {{ up.user|get_group_names }}</h5>
                    {% else %}
                    <h5>Looking for Group</h5>
                    {% endif %}
                </div>
                {% if uwe.company %}
                <div class="col-xs-6 col-md-6 col-md-offset-0 myhide">
                    <p>{{ uwe.company }}</p>
                    <p>{{ uwe.jobTitle }}</p>
                    <p>{{ uedu.school }}</p>
                    <p>{{ uedu.get_degree_display }} - {{ uedu.major }}</p>
                    <a href ="/rango/pub-profile/{{u.id}}/">View Profile</a>
                    {% if request.user|has_group %}
                    <br />
                    <a href ="/rango/send_email/{{u.id}}/">Add to Group</a>
                    {% endif %}

                </div>
                {% endif %}
            </div>
                
        {% if forloop.last %}
        </div> <!--end row-->
        {% else %}
        {% if forloop.counter|divisibleby:"2" %} <!-- this take the forloop count and see's it is divisible by 4, if so create a new row -->
        </div>
        <div class="hidden-row row-centered row mobile" id="mobilerow{% widthratio forloop.counter 2 1 %}">
            <div class="hideClose">
                <a class="close">&times;</a>
            </div>
        <!--This sets the id of the div to the row number-->
        </div>
        <div class="row placeholders mobile">
        {% endif %}

    {% endif %}
    {% endfor %}

{% endblock %}

{% block footer %}

{% endblock %}


{% block scripts %}
    
    <script src="{% static 'js/rango-jquery.js' %}"></script>
{% endblock %}